<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vue seminar 2</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>

<body>
    <div id="app">
        <ul class="product-list">
            <li v-for="product in products" :key="product.id" class="product">
                <h3>Name: {{ product.name }}</h3>
                <p>Price: {{ product.price }}</p>
                <img width="260px" height="200px" loading="lazy" :src="product.url" alt="Product">
                <button :disabled="product.discount" @click="applyDiscount(product)">
                    Скидка
                    <span v-if="product.discount">{{ product.discount }}%</span>
                </button>
            </li>
        </ul>
        <h2>Users</h2>
        <ul class="user-list">
            <li v-for="user in users" :key="user.id">
                <h5>Name: {{ user.name }}</h5>
                <p>Age: {{ user.age }}</p>
            </li>
        </ul>
        <div class="items-list">
            <h2>Items</h2>
            <ul class="item-list">
                <li v-for="item in items" :key="item.id">
                    <input type="text" v-model.number.lazy="item.amount" step="1">
                    <label>
                        <input type="checkbox">
                        {{ item.name }}
                    </label>
                </li>
            </ul>
        </div>
        <div class="contacts-form">
            <h2>Contact Form</h2>
            <form @submit.prevent="submitForm">
                <input type="text" v-model.lazy.trim="contact.firstName" placeholder="Имя">
                <input type="text" v-model.lazy.trim="contact.lastName" placeholder="Фамилия">
                <input type="email" v-model.lazy.trim="contact.email" placeholder="Email">
                <button>Добавить</button>
            </form>
            <ul class="contacts-list">
                <li v-for="contact in contacts" :key="contact.id">
                    <span>{{ contact.firstName }} {{ contact.lastName }} - {{ contact.email }}</span>
                    <button @click="deleteContact(contact)">Удалить</button>
                </li>
            </ul>
        </div>
    </div>

    <script>
        const app = {
            data() {
                return {
                    products: [
                        {
                            id: 1,
                            name: 'iPhone 12 Pro Max',
                            price: 1000,
                            url: 'https://avatars.mds.yandex.net/get-mpic/1859594/img_id1099460998159258835.jpeg/orig',
                            discount: 0
                        },
                        {
                            id: 2,
                            name: 'iPhone 14 Pro Max',
                            price: 4000,
                            url: 'https://avatars.dzeninfra.ru/get-zen_doc/1131118/pub_5df4ae423d008800af420b19_5df4aeea98930900b68cb2a1/scale_1200',
                            discount: 0
                        },
                    ],
                    users: [
                        { id: 1, name: 'John', age: 10 },
                        { id: 2, name: 'Alice', age: 20 },
                        { id: 3, name: 'Bob', age: 30 }
                    ],
                    items: [
                        { id: 1, name: 'Молоко', amount: 2 },
                        { id: 2, name: 'Хлеб', amount: 1 },
                        { id: 3, name: 'Яблоки', amount: 5 },
                        { id: 4, name: 'Мясо', amount: 0 },
                    ],
                    contacts: [],
                    contact: {
                        firstName: '',
                        lastName: '',
                        email: '',
                    }
                }
            },
            methods: {
                applyDiscount(product) {
                    if (product.discount) {
                        return;
                    }
                    product.discount = Math.floor(Math.random() * 20 + 1);
                    product.price -= product.price * product.discount / 100;
                },
                submitForm() {
                    if (this.contact.firstName && this.contact.lastName && this.contact.email) {
                        this.contacts.push({
                            id: this.contacts.length + 1,
                            ...this.contact
                        });
                    }
                    this.contact.firstName = '';
                    this.contact.lastName = '';
                    this.contact.email = '';
                },
                deleteContact(contact) {
                    this.contacts = this.contacts.filter(c => c.id !== contact.id);
                }
            }
        }
        Vue.createApp(app).mount('#app');
    </script>
</body>

</html>